var epmads_key,epmads_channel,epmads_code_format,epmads_ads_host,epmads_ads_host_overridden,epmads_click,epmads_custom_params,epmads_width,epmads_height,epmads_target_id,epmads_template_target_id,epmads_passback_tag,EpmadsConfig,EpmadsAdsConfig=EpmadsConfig,CustomWLAdServer=CustomWLAdServer||{requests:[]};try{var messageEventListener=function(event){if(event&&event.data&&"string"==typeof event.data&&0==event.data.indexOf("repeatRequest"))try{eval("CustomWLAdServer."+event.data)}catch(e){console.warn(e)}};CustomWLAdServer.windowListener||(CustomWLAdServer.windowListener=messageEventListener,window.addEventListener?window.addEventListener("message",messageEventListener):window.attachEvent&&window.attachEvent("message",messageEventListener)),("undefined"==typeof CustomWLAdServer.requests||null==CustomWLAdServer.requests)&&(CustomWLAdServer.requests=[])}catch(err){console.warn(err)}"undefined"!=typeof epmads_ads_host_overridden&&(epmads_ads_host=epmads_ads_host_overridden);var console=window.console||{warn:function(){}};CustomWLAdServer.addCampaignId=function(e){if("undefined"==typeof this.campaignIds)this.campaignIds=e;else try{null==new RegExp("(^|,)"+e+"($|,)").exec(this.campaignIds)&&(this.campaignIds+=","+e)}catch(t){this.campaignIds+=","+e}},CustomWLAdServer.getCampaignIds=function(){return this.campaignIds||""},CustomWLAdServer.repeatRequest=function(e,t,o,s){if(this.requests)for(var i=0;i<this.requests.length;i++)for(var r in this.requests[i])if(r&&r.indexOf&&r.indexOf("_key")==r.length-4&&this.requests[i][r]==e){for(var n in o)this.requests[i][n]=o[n];return t&&(this.requests[i].excluded=this.requests[i].excluded||[],"CURRENT"==s?this.requests[i].excluded=[t]:"ALL"==s&&-1==this.requests[i].excluded.indexOf(t)?(this.requests[i].excluded.push(t),this.requests[i].excluded.length>100&&this.requests[i].excluded.splice(0,1)):this.requests[i].excluded=[]),this.requests[i].invoker&&new this.requests[i].invoker(this.requests[i]).invoke(),!0}return!1},CustomWLAdServer.isFF=function(){return-1!=navigator.userAgent.toLowerCase().indexOf("firefox")},CustomWLAdServer.canWrite=function(){var e="r"+Math.random().toString(36).substr(2);document.write('<p id="'+e+'"></p>');var t=document.getElementById(e);return t?(t.parentNode.removeChild(t),!0):!1},CustomWLAdServer.getEpmadsCookiesFromLocalStorage=function(){try{if("localStorage"in window&&null!==window.localStorage&&null!==localStorage&&null!==typeof localStorage&&"undefined"!=typeof localStorage&&"undefined"!=typeof localStorage.EpmadsCookies){var e=[],t=JSON.parse(localStorage.EpmadsCookies);for(var o in t)e.push(o+"="+t[o]);return 0==e.length?"":"&"+e.join("&")}}catch(s){}return""},CustomWLAdServer.testElms=function(e){if(void 0!==e){var t,o=document.getElementById(e),s=o.childNodes;o.style.cssText+="height:0;margin:0;padding:0;border:0;background:transparent;font-size:0;";for(var i=s.length-1;i>=0;i--){var r=s[i];if(void 0!==r.tagName)if("style"==r.tagName.toLowerCase()||"script"==r.tagName.toLowerCase())t=!1;else{var n=window.getComputedStyle?getComputedStyle(r,""):r.currentStyle,a=n.position;if("static"==a||"relative"==a||!a){t=!0;break}}else if("#text"==r.nodeName&&r.nodeValue.replace(/^\s+|\s+$/g,"").length>0){t=!0;break}}t&&(o.style.height="auto",o.style.fontSize="")}},CustomWLAdServer.execBodyScripts=function(e){function t(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()}function o(e,t){if(e){var s,i;if(e.src){s=document.getElementsByTagName("head")[0],i=document.createElement("script"),i.src=e.src;var r=!!window.ActiveXObject;if(r){var n=!1;i.onreadystatechange=function(){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(n=!0,o(t.shift(),t),i.onreadystatechange=null)}}else i.onload=function(){o(t.shift(),t)};s.insertBefore(i,s.firstChild)}else{var a=e.text||e.textContent||e.innerHTML||"";s=document.getElementsByTagName("head")[0]||document.documentElement,i=document.createElement("script"),i.type="text/javascript";try{i.appendChild(document.createTextNode(a))}catch(d){i.text=a}s.insertBefore(i,s.firstChild),o(t.shift(),t)}}}var s,i,r=[],n=e.getElementsByTagName("*");for(i=0;n[i];i++)s=n[i],!t(s,"script")||s.type&&"text/javascript"!==s.type.toLowerCase()||r.push(s);o(r.shift(),r)};var EpmadsInvokeServer=function(e){this.type=e.epmads_code_format,this.key=e.epmads_key,this.channel="undefined"==typeof e.epmads_channel?"":e.epmads_channel,this.click="undefined"==typeof e.epmads_click?"":e.epmads_click,this.params="undefined"==typeof e.epmads_custom_params?{}:e.epmads_custom_params,this.target_id="undefined"==typeof e.epmads_target_id?null:e.epmads_target_id,this.template_target_id="undefined"==typeof e.epmads_template_target_id?null:e.epmads_template_target_id,this.ads_host="undefined"==typeof e.epmads_ads_host?null:e.epmads_ads_host,this.width="undefined"==typeof e.epmads_width?"":e.epmads_width,this.height="undefined"==typeof e.epmads_height?"":e.epmads_height,void 0!==typeof e.epmads_passback_tag&&(this.passbackTag=e.epmads_passback_tag),void 0!==typeof e.excluded&&(this.excluded=e.excluded),this.referer=e.epmads_referer};if(EpmadsInvokeServer.prototype={isUrlRegEx:/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/i,getScreenResolution:function(){try{return"&scrWidth="+window.screen.width+"&scrHeight="+window.screen.height}catch(e){return""}},toQueryString:function(e){var t=[];for(var o in e)t.push("cp."+o+"="+e[o]);return 0==t.length?"":"&"+t.join("&")},getHost:function(){if(this.ads_host){var e=this.params.custom_ads_host;return("https:"==location.protocol?"https:":"http:")+(e?"//"+e:this.ads_host)}for(var t,o=document.getElementsByTagName("script"),s=o.length-1;s>=0;s--){var i=o[s];if(-1!=i.src.indexOf("/js/show_ads_epmads.js")){t=i.src;break}}return t.substr(0,t.indexOf("/js/show_ads_epmads.js"))},getReqUrl:function(){return"string"==typeof this.referer&&this.isUrlRegEx.test(this.referer)?"&requestUrl="+encodeURIComponent(this.referer):"string"==typeof document.URL&&this.isUrlRegEx.test(document.URL)?"&requestUrl="+encodeURIComponent(document.URL):""},getReqRef:function(){return"string"==typeof document.referrer&&this.isUrlRegEx.test(document.referrer)?"&requestRef="+encodeURIComponent(document.referrer):""},getFlashVer:function(){var e,t,o,s;if(navigator.plugins&&navigator.plugins.length>0){t=navigator.plugins;for(var i=0;i<t.length&&!s;i++)o=t[i],o.name.indexOf("Shockwave Flash")>-1&&(s=o.description.split("Shockwave Flash ")[1])}else{o="ShockwaveFlash.ShockwaveFlash";try{e=new ActiveXObject(o+".7"),s=e.GetVariable("$version")}catch(r){}if(!s)try{e=new ActiveXObject(o+".6"),s="WIN 6,0,21,0",e.AllowScriptAccess="always",s=e.GetVariable("$version")}catch(r){}if(!s)try{e=new ActiveXObject(o),s=e.GetVariable("$version")}catch(r){}s&&(s=s.split(" ")[1].split(","),s=s[0]+"."+s[1]+" r"+s[2])}return s?s:"-"},getUrl:function(){var e="";if(this.excluded)for(j in this.excluded)e+="&excluded="+this.excluded[j];return this.getHost()+"/"+this.type+"?v=1&key="+this.key+"&ch="+this.channel+"&click="+this.click+"&tz="+(new Date).getTimezoneOffset()/-60+"&t="+(new Date).getTime()+(this.passbackTag?"&pb="+this.passbackTag:"")+e+this.getReqUrl()+this.getReqRef()+"&flashVer="+this.getFlashVer()+(this.width?"&epmads_width="+this.width:"")+(this.height?"&epmads_height="+this.height:"")+this.toQueryString(this.params)+CustomWLAdServer.getEpmadsCookiesFromLocalStorage()+this.getScreenResolution()},invokeIframeSync:function(){this.write("<iframe src='"+this.getUrl()+'\' framespacing="0" frameborder="no" scrolling="no" width="'+this.width+'" height="'+this.height+'"></iframe>')},invokeIframeAsync:function(){var e=document.createElement("iframe");e.src=this.getUrl()+"&tarId="+this.target_id+"&templTarId="+this.template_target_id+"&cIds="+CustomWLAdServer.getCampaignIds(),e.width=this.width,e.height=this.height,e.frameBorder="0",e.scrolling="no",this.append(this.target_id,e)},append:function(e,t){var o=document.getElementById(e);if(o){for(;o.childNodes.length>0;)o.removeChild(o.childNodes[0]);o.appendChild(t)}else this.onReady(function(){if(o=document.getElementById(e)){for(;o.childNodes.length>0;)o.removeChild(o.childNodes[0]);o.appendChild(t)}else console.warn("Can't find element with id: "+e)})},onReady:function(e){window.addEventListener?window.addEventListener("DOMContentLoaded",e,!1):window.attachEvent("onload",e)},invokeJsSyncCode:function(){this.write("<script type='text/javascript' src='"+this.getUrl()+"&cIds="+CustomWLAdServer.getCampaignIds()+"'></script>")},invokeJsAsyncCode:function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=this.getUrl()+"&tarId="+this.target_id+"&templTarId="+this.template_target_id+"&cIds="+CustomWLAdServer.getCampaignIds(),this.append(this.target_id,e)},write:function(e){document.write(e)},invoke:function(){"ads"==this.type&&this.target_id?this.invokeIframeAsync():"ads"==this.type?this.invokeIframeSync():this.target_id?this.invokeJsAsyncCode():this.invokeJsSyncCode()}},"undefined"!=typeof epmads_key&&epmads_key&&"undefined"!=typeof epmads_code_format&&epmads_code_format&&("undefined"==typeof EpmadsAdsConfig||!CustomWLAdServer.isFF()||CustomWLAdServer.canWrite())){var config={epmads_code_format:epmads_code_format,epmads_key:epmads_key,epmads_channel:epmads_channel,epmads_click:epmads_click,epmads_custom_params:epmads_custom_params,epmads_width:epmads_width,epmads_height:epmads_height,epmads_ads_host:epmads_ads_host,epmads_target_id:epmads_target_id,epmads_template_target_id:epmads_template_target_id,epmads_passback_tag:epmads_passback_tag,epmads_referer:"string"==typeof epmads_referer?epmads_referer:null};new EpmadsInvokeServer(config).invoke(),epmads_key=void 0,epmads_channel=void 0,epmads_code_format=void 0,epmads_ads_host=void 0,epmads_click=void 0,epmads_custom_params=void 0,epmads_width=void 0,epmads_height=void 0,epmads_target_id=void 0,epmads_template_target_id=void 0,epmads_passback_tag=void 0}else if("undefined"!=typeof EpmadsAdsConfig&&"undefined"!=typeof EpmadsAdsConfig.ads&&EpmadsAdsConfig.ads.length>0){for(var i=0;i<EpmadsAdsConfig.ads.length;i++)if(null!=EpmadsAdsConfig.ads[i].epmads_passback_tag&&null==EpmadsAdsConfig.ads[i].epmads_key)for(var j=0;j<EpmadsAdsConfig.ads.length;j++)if(null==EpmadsAdsConfig.ads[j].epmads_passback_tag){EpmadsAdsConfig.ads[j].epmads_passback_tag=EpmadsAdsConfig.ads[i].epmads_passback_tag,EpmadsAdsConfig.ads[j].epmads_passback_tag_banner_id=EpmadsAdsConfig.ads[i].epmads_passback_tag_banner_id,EpmadsAdsConfig.ads.splice(i,1),i--;break}for(var EpmadsAdsConfigWait=[],i=0;i<EpmadsAdsConfig.ads.length;i++)"undefined"!=typeof ads_host_overridden&&(EpmadsAdsConfig.ads[i].epmads_ads_host=ads_host_overridden),EpmadsAdsConfig.ads[i].invoker=EpmadsInvokeServer,CustomWLAdServer.requests.push(EpmadsAdsConfig.ads[i]),new EpmadsInvokeServer(EpmadsAdsConfig.ads[i]).invoke();EpmadsAdsConfig.ads=EpmadsAdsConfigWait}